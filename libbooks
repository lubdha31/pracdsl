from collections import Counter

library_records = {
    "Member1": ["BookA", "BookB"],
    "Member2": ["BookA"],
    "Member3": [],
    "Member4": ["BookC", "BookA", "BookB", "BookC"],
    "Member5": ["BookC"]
}

def compute_average_borrowed(records):
    total_books = sum(len(books) for books in records.values())
    total_members = len(records)
    avg = total_books / total_members if total_members > 0 else 0
    return avg

def find_highest_lowest_borrowed(records):
    book_counter = Counter()
    for books in records.values():
        book_counter.update(books)
    if not book_counter:
        return None, None
    highest_borrowed = book_counter.most_common(1)[0]
    lowest_borrowed = min(book_counter.items(), key=lambda x: x[1])
    return highest_borrowed, lowest_borrowed

def count_members_with_zero(records):
    count = sum(1 for books in records.values() if len(books) == 0)
    return count

def find_mode_book(records):
    book_counter = Counter()
    for books in records.values():
        book_counter.update(books)
    if not book_counter:
        return None
    max_borrow_count = max(book_counter.values())
    mode_books = [book for book, count in book_counter.items() if count == max_borrow_count]
    return mode_books

print("üìö Library Borrowing Record Analysis üìö\n")

avg = compute_average_borrowed(library_records)
print(f"1Ô∏è‚É£ Average number of books borrowed per member: {avg:.2f}")

highest, lowest = find_highest_lowest_borrowed(library_records)
print(f"2Ô∏è‚É£ Highest borrowed book: {highest[0]} ({highest[1]} times)")
print(f"   Lowest borrowed book: {lowest[0]} ({lowest[1]} times)")

zero_borrow = count_members_with_zero(library_records)
print(f"3Ô∏è‚É£ Members who have not borrowed any books: {zero_borrow}")

mode_books = find_mode_book(library_records)
print(f"4Ô∏è‚É£ Most frequently borrowed book(s): {', '.join(mode_books)}")

print("\nüìä TIME AND SPACE COMPLEXITY SUMMARY:")
print("Compute Average Borrowed:     Time ‚Üí O(n), Space ‚Üí O(1)")
print("Find Highest & Lowest Book:   Time ‚Üí O(m + b), Space ‚Üí O(b)")
print("Count Zero Borrow Members:    Time ‚Üí O(n), Space ‚Üí O(1)")
print("Find Mode Book:               Time ‚Üí O(m + b), Space ‚Üí O(b)")
